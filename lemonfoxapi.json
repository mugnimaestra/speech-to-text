{
    "openapi": "3.0.0",
    "info": {
      "title": "Lemonfox Speech-to-Text API",
      "description": "Convert audio to text quickly and reliably using Whisper v3, with support for speaker diarization and multiple languages.",
      "version": "1.0.0"
    },
    "servers": [
      {
        "url": "https://api.lemonfox.ai/v1"
      }
    ],
    "paths": {
      "/audio/transcriptions": {
        "post": {
          "summary": "Transcribe audio to text",
          "description": "Convert audio file to text with optional speaker diarization and various output formats",
          "requestBody": {
            "required": true,
            "content": {
              "multipart/form-data": {
                "schema": {
                  "type": "object",
                  "required": ["file"],
                  "properties": {
                    "file": {
                      "type": "string",
                      "format": "binary",
                      "description": "Audio file to transcribe (max 100MB) or URL to audio file (max 1GB)"
                    },
                    "response_format": {
                      "type": "string",
                      "enum": ["json", "text", "srt", "verbose_json", "vtt"],
                      "default": "json",
                      "description": "The format of the transcription response"
                    },
                    "speaker_labels": {
                      "type": "boolean",
                      "description": "Enable speaker diarization"
                    },
                    "min_speakers": {
                      "type": "integer",
                      "description": "Minimum number of speakers for diarization"
                    },
                    "max_speakers": {
                      "type": "integer",
                      "description": "Maximum number of speakers for diarization"
                    },
                    "prompt": {
                      "type": "string",
                      "description": "Optional text prompt to guide the transcription"
                    },
                    "language": {
                      "type": "string",
                      "description": "Language of the input audio"
                    },
                    "callback_url": {
                      "type": "string",
                      "format": "uri",
                      "description": "URL for receiving transcription results asynchronously"
                    },
                    "translate": {
                      "type": "boolean",
                      "description": "Translate the audio content to English"
                    },
                    "timestamp_granularities": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "enum": ["word"]
                      },
                      "description": "Enable word-level timestamps"
                    }
                  }
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Successful transcription",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "task": {
                        "type": "string",
                        "description": "Type of task performed"
                      },
                      "language": {
                        "type": "string",
                        "description": "Detected or specified language code"
                      },
                      "duration": {
                        "type": "number",
                        "description": "Duration of the audio in seconds"
                      },
                      "text": {
                        "type": "string",
                        "description": "Complete transcribed text"
                      },
                      "segments": {
                        "type": "array",
                        "description": "Array of transcription segments",
                        "items": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "integer",
                              "description": "Segment identifier"
                            },
                            "text": {
                              "type": "string",
                              "description": "Transcribed text for this segment"
                            },
                            "start": {
                              "type": "number",
                              "description": "Start time of the segment in seconds"
                            },
                            "end": {
                              "type": "number",
                              "description": "End time of the segment in seconds"
                            },
                            "language": {
                              "type": "string",
                              "description": "Language code for this segment"
                            },
                            "speaker": {
                              "type": "string",
                              "description": "Speaker identifier when speaker_labels is enabled"
                            },
                            "words": {
                              "type": "array",
                              "description": "Word-level details when timestamp_granularities includes 'word'",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "word": {
                                    "type": "string",
                                    "description": "Individual word"
                                  },
                                  "start": {
                                    "type": "number",
                                    "description": "Start time of the word in seconds"
                                  },
                                  "end": {
                                    "type": "number",
                                    "description": "End time of the word in seconds"
                                  },
                                  "speaker": {
                                    "type": "string",
                                    "description": "Speaker identifier for this word"
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "security": [
            {
              "BearerAuth": []
            }
          ]
        }
      }
    },
    "components": {
      "securitySchemes": {
        "BearerAuth": {
          "type": "http",
          "scheme": "bearer"
        }
      }
    }
  }
  